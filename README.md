# RPC

一款基于 Netty + Nacos 实现的自定义 RPC 框架

## 简介

RPC（Remote Procedure Call）远程过程调用协议，可以让客户端像调用本地方法一样，直接调用服务端方法，常见的框架有Dubbo、gRPC等。

一款合格的 RPC 框架不仅要提供服务发现功能，还需要提供负载均衡、容错等功能，常见的模块有：

1. **注册中心**：注册中心负责服务地址的注册与查找，相当于目录服务。服务端启动的时候将服务名称及其对应的地址(ip+port)注册到注册中心，服务消费端根据服务名称找到对应的服务地址。有了服务地址之后，服务消费端就可以通过网络请求服务端了。
2. **网络传输** ：发送与接收调用请求
3. **序列化** ：怎样对对象进行序列化和反序列化，以便在网络上传输
4. **动态代理** ：因为 RPC 的主要目的就是让我们调用远程方法像调用本地方法一样简单，使用动态代理可以屏蔽远程方法调用的细节比如网络传输。
5. **负载均衡** ：避免单个服务器响应同一请求，而造成服务器宕机、崩溃等问题

<img src=".\assets\architecture.png" alt="系统架构" style="zoom:67%;" />

## 项目亮点

- [x] 使用 Netty（基于 NIO）进行网络传输
- [x] 使用 Nacos 管理相关服务地址信息
- [x] 使用了多种序列化算法，如Kyro、Protobuf等
- [x] 运用了SPI 机制，增加了项目的可拓展性
- [x] 在服务端，Netty 重用 Channel 避免重复连接服务端
- [x] 在客户端调用远程服务时，实现了负载均衡并采用容错机制

之后还可以优化的点：

- [ ] 加入拦截器层
- [ ] 加入注解机制，通过注解能自动注册服务
